
<!-- Enhanced Dashboard Container -->
<div class="dashboard-container">
  <!-- Decorative Background Elements -->
  <div class="absolute top-10 left-10 w-64 h-64 bg-blue-500 rounded-full opacity-5 animate-float"></div>
  <div class="absolute bottom-20 right-10 w-80 h-80 bg-green-500 rounded-full opacity-5 animate-float" style="animation-delay: 1s;"></div>
  
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="flex justify-between items-center px-4 sm:px-6 lg:px-8 py-6">
      <div class="welcome-section animate-fade-in">
        <h1 class="text-2xl sm:text-3xl font-bold">Welcome back, {{ currentUser?.firstName || 'User' }}!</h1>
        <p class="text-gray-600 mt-1">Here's your financial overview</p>
      </div>
      
      <!-- Mobile Quick Actions -->
      <div class="flex gap-2 sm:hidden">
        <button class="flex flex-col items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all" (click)="navigateTo('/send-money')" appHoverAnimation appRipple>
          <span class="text-xl">üì§</span>
          <span class="text-xs mt-1">Send</span>
        </button>
        <button class="flex flex-col items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-green-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all" (click)="navigateTo('/add-funds')" appHoverAnimation appRipple>
          <span class="text-xl">üí∞</span>
          <span class="text-xs mt-1">Add</span>
        </button>
        <button class="flex flex-col items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all" (click)="navigateTo('/pay-bill')" appHoverAnimation appRipple>
          <span class="text-xl">üí≥</span>
          <span class="text-xs mt-1">Pay</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Main Dashboard Content -->
  <div class="dashboard-content">
    <!-- Balance Overview Cards -->
    <div class="balance-section">
      <div class="section-header">
        <h2 class="section-title animate-fade-in">Balance Overview</h2>
        <button class="flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg shadow-sm hover:shadow-md transition-all disabled:opacity-50 animate-fade-in" (click)="refreshData()" [disabled]="isLoading" appHoverAnimation="pulse" appRipple>
          <span class="text-lg">üîÑ</span>
          <span class="hidden sm:inline">Refresh</span>
        </button>
      </div>
      
      <div class="balance-cards">
        <!-- Total Balance Card -->
        <div class="balance-card primary animate-fade-in" style="animation-delay: 100ms;" appHoverAnimation="glow" [glowColor]="'rgba(59, 130, 246, 0.3)'">
          <div class="card-header">
            <span class="card-icon">üí∞</span>
            <span class="card-title">Total Balance</span>
          </div>
          <div class="card-amount">{{ getTotalBalance() | currency:'USD':'symbol':'1.2-2' }}</div>
          <div class="card-change" [class.positive]="getBalanceChange() >= 0" [class.negative]="getBalanceChange() < 0">
            <span class="change-icon mr-1">{{ getBalanceChange() >= 0 ? '‚Üó' : '‚Üò' }}</span>
            <span class="change-amount">{{ getBalanceChange() | currency:'USD':'symbol':'1.2-2' }}</span>
            <span class="change-period ml-1">this month</span>
          </div>
          
          <!-- Balance Chart -->
          <div class="mt-4 h-24">
            <canvas #balanceChart></canvas>
          </div>
        </div>

        <!-- Primary Wallet Card -->
        <div class="balance-card secondary animate-fade-in" style="animation-delay: 200ms;" *ngIf="getPrimaryWallet() as primaryWallet" appHoverAnimation="glow" [glowColor]="'rgba(16, 185, 129, 0.3)'">
          <div class="card-header">
            <span class="card-icon">üè¶</span>
            <span class="card-title">{{ primaryWallet.name || 'Primary Wallet' }}</span>
          </div>
          <div class="card-amount">{{ primaryWallet.balance | currency:primaryWallet.currency:'symbol':'1.2-2' }}</div>
          <div class="card-status" [class]="primaryWallet.status">
            {{ primaryWallet.status | titlecase }}
          </div>
          
          <!-- Transaction Chart -->
          <div class="mt-4 h-24">
            <canvas #transactionChart></canvas>
          </div>
        </div>

        <!-- Quick Stats Card -->
        <div class="balance-card info animate-fade-in" style="animation-delay: 300ms;" appHoverAnimation="glow" [glowColor]="'rgba(249, 115, 22, 0.3)'">
          <div class="card-header">
            <span class="card-icon">üìä</span>
            <span class="card-title">Quick Stats</span>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="text-center">
              <div class="text-2xl font-bold text-gray-900">{{ getWalletCount() }}</div>
              <div class="text-sm text-gray-600">Wallets</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-gray-900">{{ getTransactionCount() }}</div>
              <div class="text-sm text-gray-600">Transactions</div>
            </div>
          </div>
          
          <!-- Spending Breakdown -->
          <div class="mt-4">
            <h4 class="text-sm font-medium text-gray-600 mb-2">Monthly Spending</h4>
            <div class="space-y-2">
              <div>
                <div class="flex justify-between text-xs mb-1">
                  <span>Shopping</span>
                  <span>35%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div class="bg-blue-600 h-2 rounded-full" style="width: 35%"></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between text-xs mb-1">
                  <span>Bills</span>
                  <span>25%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div class="bg-purple-600 h-2 rounded-full" style="width: 25%"></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between text-xs mb-1">
                  <span>Food</span>
                  <span>20%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div class="bg-green-600 h-2 rounded-full" style="width: 20%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Transactions Section -->
    <div class="transactions-section">
      <div class="section-header">
        <h2 class="section-title animate-fade-in" style="animation-delay: 400ms;">Recent Transactions</h2>
        <button class="flex items-center gap-1 text-blue-600 hover:text-blue-700 font-medium transition-colors animate-fade-in" style="animation-delay: 450ms;" (click)="navigateTo('/transactions')">
          View All
          <span class="text-lg">‚Ä∫</span>
        </button>
      </div>
      
      <div class="transactions-list" *ngIf="recentTransactions.length > 0; else noTransactions">
        <div 
          *ngFor="let transaction of recentTransactions.slice(0, 5); let i = index" 
          class="transaction-item animate-slide-right"
          [style.animation-delay]="(i * 100 + 500) + 'ms'"
          (click)="viewTransaction(transaction)"
          appHoverAnimation="scale"
          [scale]="1.02"
          appRipple
          [rippleColor]="'rgba(0, 0, 0, 0.05)'">
          <div class="flex items-center gap-4">
            <div class="w-12 h-12 rounded-full flex items-center justify-center text-xl shadow-md">
              {{ getTransactionIcon(transaction) }}
            </div>
            <div class="flex-1">
              <div class="flex justify-between items-start">
                <div>
                  <h4 class="font-semibold text-gray-900">{{ transaction.description || 'Transaction' }}</h4>
                  <p class="text-sm text-gray-500">
                    {{ transaction.createdAt | date:'MMM dd, yyyy' }} ‚Ä¢ 
                    {{ transaction.status | titlecase }}
                  </p>
                </div>
                <div class="text-right">
                  <div class="font-bold text-lg" [class]="getTransactionType(transaction)">
                    <span class="mr-1">{{ getTransactionSign(transaction) }}</span>
                    {{ transaction.amount | currency:transaction.currency:'symbol':'1.2-2' }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <ng-template #noTransactions>
        <div class="no-transactions animate-scale-up" style="animation-delay: 500ms;">
          <div class="empty-icon animate-float">üìä</div>
          <h3 class="text-xl font-semibold text-gray-900 mb-2">No transactions yet</h3>
          <p class="text-gray-600 mb-6">Your transaction history will appear here</p>
          <button class="px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg shadow-lg hover:shadow-xl transition-all" (click)="navigateTo('/send-money')">
            Make your first transaction
          </button>
        </div>
      </ng-template>
    </div>

    <!-- Quick Actions Section -->
    <div class="quick-actions-section hidden sm:block">
      <div class="section-header">
        <h2 class="section-title animate-fade-in" style="animation-delay: 400ms;">Quick Actions</h2>
      </div>
      
      <div class="actions-grid">
        <div class="action-card animate-scale-up" style="animation-delay: 500ms;" (click)="navigateTo('/send-money')" appHoverAnimation="lift" appRipple [rippleColor]="'rgba(59, 130, 246, 0.2)'">
          <div class="action-icon send">üì§</div>
          <h3 class="action-title">Send Money</h3>
          <p class="action-description">Transfer funds to anyone, anywhere</p>
        </div>
        
        <div class="action-card animate-scale-up" style="animation-delay: 600ms;" (click)="navigateTo('/add-funds')" appHoverAnimation="lift" appRipple [rippleColor]="'rgba(16, 185, 129, 0.2)'">
          <div class="action-icon add">üí∞</div>
          <h3 class="action-title">Add Funds</h3>
          <p class="action-description">Top up your wallet instantly</p>
        </div>
        
        <div class="action-card animate-scale-up" style="animation-delay: 700ms;" (click)="navigateTo('/pay-bill')" appHoverAnimation="lift" appRipple [rippleColor]="'rgba(139, 92, 246, 0.2)'">
          <div class="action-icon pay">üí≥</div>
          <h3 class="action-title">Pay Bills</h3>
          <p class="action-description">Pay utilities and services</p>
        </div>
        
        <div class="action-card animate-scale-up" style="animation-delay: 800ms;" (click)="navigateTo('/request-money')" appHoverAnimation="lift" appRipple [rippleColor]="'rgba(249, 115, 22, 0.2)'">
          <div class="action-icon request">üì•</div>
          <h3 class="action-title">Request Money</h3>
          <p class="action-description">Ask friends to send you money</p>
        </div>
      </div>
    </div>

    <!-- Wallets Overview Section -->
    <div class="wallets-section" *ngIf="wallets.length > 0">
      <div class="section-header">
        <h2 class="section-title animate-fade-in" style="animation-delay: 900ms;">Your Wallets</h2>
        <button class="flex items-center gap-1 text-blue-600 hover:text-blue-700 font-medium transition-colors animate-fade-in" style="animation-delay: 950ms;" (click)="navigateTo('/wallets')">
          View All
          <span class="text-lg">‚Ä∫</span>
        </button>
      </div>
      
      <div class="wallets-grid">
        <div 
          *ngFor="let wallet of wallets.slice(0, 3); let i = index" 
          class="wallet-card animate-scale-up"
          [style.animation-delay]="(i * 100 + 1000) + 'ms'"
          (click)="selectWallet(wallet)"
          appHoverAnimation="lift"
          appRipple>
          <div class="wallet-header">
            <div class="flex items-center gap-3">
              <span class="wallet-icon">üè¶</span>
              <span class="wallet-name">{{ wallet.name }}</span>
            </div>
            <span class="wallet-status" [class]="wallet.status">
              {{ wallet.status | titlecase }}
            </span>
          </div>
          <div class="wallet-balance">
            {{ wallet.balance | currency:wallet.currency:'symbol':'1.2-2' }}
          </div>
          <div class="wallet-currency">{{ wallet.currency }}</div>
        </div>
      </div>
    </div>

    <!-- Notifications Section -->
    <div class="notifications-section" *ngIf="getUnreadNotificationCount() > 0">
      <div class="section-header">
        <h2 class="section-title animate-fade-in" style="animation-delay: 900ms;">Notifications</h2>
        <button class="flex items-center gap-1 text-blue-600 hover:text-blue-700 font-medium transition-colors animate-fade-in" style="animation-delay: 950ms;" (click)="navigateTo('/notifications')">
          View All
          <span class="text-lg">‚Ä∫</span>
        </button>
      </div>
      
      <div class="notifications-list">
        <div 
          *ngFor="let notification of getUnreadNotifications().slice(0, 3); let i = index" 
          class="notification-item animate-slide-right"
          [style.animation-delay]="(i * 100 + 1000) + 'ms'"
          (click)="viewNotification(notification)">
          <div class="flex items-start gap-4">
            <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 shadow-md">
              üîî
            </div>
            <div class="flex-1">
              <h4 class="font-semibold text-gray-900 mb-1">{{ notification.title }}</h4>
              <p class="text-sm text-gray-600 mb-2">{{ notification.message }}</p>
              <span class="text-xs text-gray-500">{{ notification.createdAt | date:'short' }}</span>
            </div>
            <div class="w-2 h-2 bg-blue-600 rounded-full animate-pulse"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Enhanced Loading Overlay -->
<div class="loading-overlay" *ngIf="isLoading">
  <div class="loading-spinner">
    <div class="spinner"></div>
    <p class="text-white mt-4 font-medium">Loading your dashboard...</p>
    <div class="loading-progress-container mt-4">
      <div class="loading-progress-bar"></div>
    </div>
  </div>
</div>

<!-- Skeleton Loading State -->
<div class="skeleton-container" *ngIf="isLoading">
  <div class="skeleton-header">
    <div class="skeleton-title shimmer"></div>
    <div class="skeleton-subtitle shimmer"></div>
  </div>
  
  <div class="skeleton-cards">
    <div class="skeleton-card shimmer"></div>
    <div class="skeleton-card shimmer"></div>
    <div class="skeleton-card shimmer"></div>
  </div>
  
  <div class="skeleton-section">
    <div class="skeleton-section-header shimmer"></div>
    <div class="skeleton-list">
      <div class="skeleton-list-item shimmer"></div>
      <div class="skeleton-list-item shimmer"></div>
      <div class="skeleton-list-item shimmer"></div>
    </div>
  </div>
</div>