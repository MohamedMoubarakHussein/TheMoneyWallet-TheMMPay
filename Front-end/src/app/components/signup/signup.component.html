<app-header></app-header>

<div class="min-h-screen flex">
  <!-- Left Section - Sign Up Form -->
  <div class="flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12">
    <div class="max-w-md w-full space-y-8" @fadeInUp>
      <div class="text-center">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">Create Account</h1>
        <p class="text-gray-600">Join our secure payment platform</p>
      </div>

      <form class="space-y-6" [formGroup]="signupForm" (ngSubmit)="onSubmit()">
        <div *ngIf="serverErrorMessage" class="bg-red-50 border border-red-200 rounded-lg p-4 animate-fadeIn">
          <p class="text-red-800 text-sm">{{ serverErrorMessage }}</p>
        </div>

        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Username</label>
          <input 
            type="text" 
            placeholder="Enter your username" 
            formControlName="userName"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          >
          <div *ngIf="showError('userName')" class="text-red-600 text-sm animate-fadeIn">
            <div *ngIf="signupForm.get('userName')?.errors?.['required']">Username is required</div>
            <div *ngIf="signupForm.get('userName')?.errors?.['minlength']">Minimum 4 characters</div>
            <div *ngIf="signupForm.get('userName')?.errors?.['maxlength']">Maximum 16 characters</div>
            <div *ngIf="signupForm.get('userName')?.errors?.['serverError']">
              {{ signupForm.get('userName')?.errors?.['serverError'] }}
            </div>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div class="space-y-2">
            <label class="block text-sm font-medium text-gray-700">First Name</label>
            <input 
              type="text" 
              placeholder="Enter first name" 
              formControlName="firstName"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
            <div *ngIf="showError('firstName')" class="text-red-600 text-sm animate-fadeIn">
              <div *ngIf="signupForm.get('firstName')?.errors?.['required']">First name is required</div>
              <div *ngIf="signupForm.get('firstName')?.errors?.['minlength']">Minimum 2 characters</div>
              <div *ngIf="signupForm.get('firstName')?.errors?.['maxlength']">Maximum 16 characters</div>
              <div *ngIf="signupForm.get('firstName')?.errors?.['serverError']">
                {{ signupForm.get('firstName')?.errors?.['serverError'] }}
              </div>
            </div>
          </div>

          <div class="space-y-2">
            <label class="block text-sm font-medium text-gray-700">Last Name</label>
            <input 
              type="text" 
              placeholder="Enter last name" 
              formControlName="lastName"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
            <div *ngIf="showError('lastName')" class="text-red-600 text-sm animate-fadeIn">
              <div *ngIf="signupForm.get('lastName')?.errors?.['required']">Last name is required</div>
              <div *ngIf="signupForm.get('lastName')?.errors?.['minlength']">Minimum 2 characters</div>
              <div *ngIf="signupForm.get('lastName')?.errors?.['maxlength']">Maximum 16 characters</div>
              <div *ngIf="signupForm.get('lastName')?.errors?.['serverError']">
                {{ signupForm.get('lastName')?.errors?.['serverError'] }}
              </div>
            </div>
          </div>
        </div>

        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Email</label>
          <input 
            type="email" 
            placeholder="Enter email" 
            formControlName="email"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          >
          <div *ngIf="showError('email')" class="text-red-600 text-sm animate-fadeIn">
            <div *ngIf="signupForm.get('email')?.errors?.['required']">Email is required</div>
            <div *ngIf="signupForm.get('email')?.errors?.['email']">Invalid email format</div>
            <div *ngIf="signupForm.get('email')?.errors?.['serverError']">
              {{ signupForm.get('email')?.errors?.['serverError'] }}
            </div>
          </div>
        </div>

        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Password</label>
          <input 
            type="password" 
            placeholder="••••••••" 
            formControlName="password"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          >
          <div *ngIf="showError('password')" class="text-red-600 text-sm animate-fadeIn">
            <div *ngIf="signupForm.get('password')?.errors?.['required']">Password is required</div>
            <div *ngIf="signupForm.get('password')?.errors?.['minlength']">Minimum 8 characters</div>
            <div *ngIf="signupForm.get('password')?.errors?.['maxlength']">Maximum 16 characters</div>
            <div *ngIf="signupForm.get('password')?.errors?.['serverError']">
              {{ signupForm.get('password')?.errors?.['serverError'] }}
            </div>
          </div>
        </div>

        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Confirm Password</label>
          <input 
            type="password" 
            placeholder="••••••••" 
            formControlName="confirmPassword"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          >
          <div *ngIf="showError('confirmPassword')" class="text-red-600 text-sm animate-fadeIn">
            <div *ngIf="signupForm.get('confirmPassword')?.errors">Password doesn't match</div>
          </div>
        </div>

        <div class="space-y-2">
          <label class="flex items-start">
            <input 
              type="checkbox" 
              formControlName="terms" 
              class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1"
            >
            <span class="ml-2 text-sm text-gray-700">
              I agree to the 
              <a href="#" class="text-blue-600 hover:text-blue-700">Terms</a> 
              and 
              <a href="#" class="text-blue-600 hover:text-blue-700">Privacy Policy</a>
            </span>
          </label>
          <div *ngIf="showError('terms')" class="text-red-600 text-sm animate-fadeIn">
            You must accept the terms
          </div>
        </div>

        <button 
          type="submit" 
          [disabled]="signupForm.invalid || isSubmitting"
          class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <span *ngIf="!isSubmitting">Create Account</span>
          <span *ngIf="isSubmitting" class="flex items-center">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>
            Creating...
          </span>
        </button>

        <div class="relative">
          <div class="absolute inset-0 flex items-center">
            <div class="w-full border-t border-gray-300"></div>
          </div>
          <div class="relative flex justify-center text-sm">
            <span class="px-2 bg-white text-gray-500">or sign up with</span>
          </div>
        </div>

        <div class="flex justify-center">
          <button 
            type="button" 
            (click)="btnGoogle()"
            class="w-full inline-flex justify-center py-2 px-4 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors"
          >
            <i class="fab fa-google text-red-500 mr-2"></i>
            Google
          </button>
        </div>

        <p class="text-center text-sm text-gray-600">
          Already have an account? 
          <a routerLink="/signin" class="font-medium text-blue-600 hover:text-blue-700">Sign in</a>
        </p>
      </form>
    </div>
  </div>

  <!-- Right Section - Background -->
  <div class="hidden lg:block lg:w-1/2 relative">
    <div class="absolute inset-0 bg-gradient-to-br from-blue-900 to-blue-500"></div>
    <div class="relative h-full flex items-center justify-center px-8" @fadeInUp>
      <div class="text-center text-white">
        <h2 class="text-4xl font-bold mb-4">Start Your Financial Journey</h2>
        <p class="text-xl text-blue-100">Get access to seamless payments and bill management</p>
      </div>
    </div>
  </div>
</div>

<app-coming-soon 
*ngIf="showComingSoon" 
(closeModal)="showComingSoon = false">
</app-coming-soon>